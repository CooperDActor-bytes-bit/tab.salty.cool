function settings__window_show(){settings_window.style.display="",settings_window.dataset.show="true",settings_window.classList.remove("animation__settings_window_hide"),settings_window.classList.add("animation__settings_window_show")}function settings__window_hide(){settings_window.classList.remove("animation__settings_window_show"),settings_window.classList.add("animation__settings_window_hide")}function settings__start(){let t=localStorage.getItem("clock_hide");qs("[data-uid='settings_checkbox'][data-name='clock__hide']").checked="true"===t;let e=localStorage.getItem("clock_twentyfour");qs("[data-uid='settings_checkbox'][data-name='clock__tf']").checked="true"===e;let s=qsAll("[data-uid='settings_radio']");for(let t=0;t<s.length;t++)s[t].checked=!1;let n=localStorage.getItem("global_font");n||(n="roboto");let i=qs("[data-uid='settings_radio'][data-category='global_font'][data-name='"+n+"']");i&&(i.checked=!0)}let settings_btn=qs("#settings_btn"),settings_window=qs(".settings_window"),settings_window_block_rate=qs(".settings_window_block_rate"),settings_window_block_rate_link=qs(".settings_window_block_rate_link"),settings_close_rate=qs("[data-uid='settings_close_rate']"),settings_all_checkbox=qsAll("[data-uid='settings_checkbox']"),settings_all_radio=qsAll("[data-uid='settings_radio']"),settings_window_bg_items=qs(".settings_window_bg_items"),settings_upload_image=qs("[data-uid='settings_upload_image']"),settings_reset_image=qs("[data-uid='settings_reset_image']"),settings_export_ud=qs("[data-uid='settings_export_ud']"),settings_import_ud=qs("[data-uid='settings_import_ud']"),settings_reset_ud=qs("[data-uid='settings_reset_ud']"),settings_window_block_reset=qs(".settings_window_block_reset"),settings_reset_ud_cancel=qs("[data-uid='settings_reset_ud_cancel']"),settings_reset_ud_reset=qs("[data-uid='settings_reset_ud_reset']");settings_window.addEventListener("animationend",(function(t){t.target.classList.contains("settings_window")&&"animation__settings_window_hide"===t.animationName&&(settings_window.style.display="none",settings_window.dataset.show="false")})),document.addEventListener("mousedown",(function(t){t.target.matches(".settings, .settings *")||"true"===settings_window.dataset.show&&settings__window_hide()})),settings_btn.addEventListener("click",(function(){"true"===settings_window.dataset.show?settings__window_hide():(settings__start(),settings__window_show())})),settings_close_rate.addEventListener("click",(function(){settings_window_block_rate.style.display="none"})),settings_window.addEventListener("click",(function(t){if("settings_checkbox_label"===t.target.dataset.uid){let e=t.target.previousElementSibling;e&&e.click()}})),settings_window.addEventListener("click",(function(t){if("settings_checkbox"===t.target.dataset.uid){let e=t.target,s=e.dataset.name,n=e.checked;"clock__hide"===s&&(n?localStorage.setItem("clock_hide","true"):localStorage.setItem("clock_hide","false"),clock__manager()),"clock__tf"===s&&(n?localStorage.setItem("clock_twentyfour","true"):localStorage.setItem("clock_twentyfour","false"),clock__manager())}})),settings_window.addEventListener("click",(function(t){if("settings_radio_label"===t.target.dataset.uid){let e=t.target.previousElementSibling;e&&e.click()}})),settings_window.addEventListener("click",(function(t){if("settings_radio"===t.target.dataset.uid){let e=t.target,s=e.dataset.category,n=e.dataset.name;if("global_font"===s){let t=qsAll("[data-uid='settings_radio'][data-category='global_font']");for(let e=0;e<t.length;e++)t[e].checked=!1;e.checked=!0,localStorage.setItem("global_font",n),fonts_manager()}}})),settings_window_bg_items.addEventListener("click",(function(t){if(t.target.classList.contains("settings_window_bg_item")){let e=t.target.dataset.src;t.target.style.opacity="0.8",t.target.style.pointerEvents="none",img_resize(e,window.screen.width,!1,(function(e){e&&chromels("set","bg_src",e,(function(){bg_manager()})),t.target.style.opacity="",t.target.style.pointerEvents=""}))}})),settings_upload_image.addEventListener("click",(function(){let t=document.createElement("input");t.type="file",t.accept="image/*",t.style="position: absolute; top: -9999px; left: -9999px;",document.body.appendChild(t),t.addEventListener("change",(function(){let e=t.files[0],s=URL.createObjectURL(e);img_resize(s,window.screen.width,!1,(function(t){URL.revokeObjectURL(s),t&&chromels("set","bg_src",t,(function(){bg_manager()}))}))})),t.click()})),settings_reset_image.addEventListener("click",(function(){chromels("remove","bg_src",!1,(function(){bg_manager()}))})),settings_export_ud.addEventListener("click",(function(){chrome.storage.local.get(null,(function(t){let e={};e.chrome_ls=t,e.ls=localStorage;let s=JSON.stringify(e),n=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a");o.style="position: absolute; top: -9999px; left: -9999px;",o.href=i,o.download="date.json",document.body.appendChild(o),o.click(),URL.revokeObjectURL(i),o.parentNode.removeChild(o)}))})),settings_import_ud.addEventListener("click",(function(){let t=document.createElement("input");t.style="position: absolute; top: -9999px; left: -9999px;",t.type="file",t.accept="application/JSON",t.addEventListener("change",(function(){let e=t.files[0],s=new FileReader;s.addEventListener("load",(function(){let t=JSON.parse(s.result);chrome.storage.local.clear((function(){localStorage.clear();for(let e in t.ls)localStorage.setItem(e,t.ls[e]);let e=Object.keys(t.chrome_ls).length;for(let s in t.chrome_ls)chromels("set",s,t.chrome_ls[s],(function(){e--,0===e&&window.location.reload()}))}))})),s.readAsText(e)})),document.body.appendChild(t),t.click()})),settings_reset_ud.addEventListener("click",(function(){settings_reset_ud.style.display="none",settings_window_block_reset.style.display=""})),settings_reset_ud_cancel.addEventListener("click",(function(){settings_window_block_reset.style.display="none",settings_reset_ud.style.display=""})),settings_reset_ud_reset.addEventListener("click",(function(){chrome.storage.local.clear((function(){localStorage.clear(),window.location.reload()}))})),settings_window_block_rate_link.href="https://chrome.google.com/webstore/detail/"+chrome.runtime.id+"/reviews";