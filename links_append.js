function links_append__set_item_data(t,e,n,i){chromels("set","links_item_"+t+"_title",e,(function(){chromels("set","links_item_"+t+"_url",n,(function(){i&&i()}))}))}function links_append__get_item_data(t,e){chromels("get","links_item_"+t+"_title",!1,(function(n){chromels("get","links_item_"+t+"_url",!1,(function(t){e&&e({title:n,url:t})}))}))}function links_append__remove_item_data(t,e){chromels("remove","links_item_"+t+"_title",!1,(function(){chromels("remove","links_item_"+t+"_url",!1,(function(){e&&e()}))}))}function links_append__create_item(t,e){let n=document.createElement("a");n.classList.add("links_window_item"),n.dataset.id=t,n.innerHTML='\n    <img src="https://www.google.com/s2/favicons?sz=24&domain_url=example.com" alt="">\n    <text>loading..</text>\n\n    <span class="material-icons" data-uid="links_window_item_edit">edit</span>\n    <span class="material-icons" data-uid="links_window_item_remove">close</span>\n    ',links_window_items.appendChild(n),links_append__update_item(t,(function(){e&&e()}))}function links_append__update_item(t,e){let n=qs('.links_window_item[data-id="'+t+'"]');n&&links_append__get_item_data(t,(function(i){let _=i.title,s=i.url;n.href=s;let l=qs('.links_window_item[data-id="'+t+'"]>img');l&&(l.src="https://www.google.com/s2/favicons?sz=24&domain_url="+s);let o=qs('.links_window_item[data-id="'+t+'"]>text');o&&(o.textContent=_),e&&e()}))}function links_append__remove_item(t,e){links_append__remove_item_data(t,(function(){let n=qs('.links_window_item[data-id="'+t+'"]');n&&(n.parentNode.removeChild(n),e&&e())}))}function links_append__create_item_data(t,e,n){chromels("get","links_items_count",!1,(function(i){i||(i=0);let _=i++;chromels("set","links_items_count",i,(function(){chromels("get","links_items",!1,(function(i){i||(i=[]),i.push(_),chromels("set","links_items",i,(function(){links_append__set_item_data(_,t,e,(function(){n&&n(_)}))}))}))}))}))}function links_append__create_items_data(t,e){let n=0,i=[];!function _(){if(t.length>0){links_append__create_item_data(t[n].title,t[n].url,(function(s){i.push(s),n===t.length-1?e&&e(i):(n++,_())}))}}()}function links_append__index_items_manager(t){let e=[],n=qsAll(".links_window_item");for(let t=0;t<n.length;t++)e.push(Number(n[t].dataset.id));chromels("set","links_items",e,(function(){t&&t()}))}function links_append__go(t){function e(){chromels("get","links_items",!1,(function(e){for(let t=0;t<e.length;t++)links_append__create_item(e[t]);t&&t()}))}links_window_items.innerHTML="",chromels("get","links_items_count",!1,(function(t){t?e():links_append__create_items_data(links_append__start_items,(function(t){e()}))}))}let links_append__start_items=[{title:"Google",url:"https://google.com"},{title:"Chrome Web Store",url:"https://chrome.google.com/webstore"},{title:"YouTube",url:"https://youtube.com"}];