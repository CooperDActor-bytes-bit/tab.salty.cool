function links__window_show(){links_window.style.display="",links_window.dataset.show="true",links_window.classList.remove("animation__links_window_hide"),links_window.classList.add("animation__links_window_show")}function links__window_hide(){links_window.classList.remove("animation__links_window_show"),links_window.classList.add("animation__links_window_hide")}function links__empty_manager(){qsAll(".links_window_item").length>0?links_window_empty.style.display="none":links_window_empty.style.display=""}function links__send_form(){let n=links_input_title.value,i=links_input_url.value;if(i){n||(n=i),i=vurl(i);let _=links_save.dataset.edit_id;"false"===_?(links_append__create_item_data(n,i,(function(n){links_append__create_item(n),links__empty_manager(),max_scroll_top(links_window_items)})),links_input_title.value="",links_input_url.value=""):(links_append__set_item_data(_,n,i,(function(){links_append__update_item(_)})),links_form.style.display="none",links_window_panel.style.display="")}else links_input_url.focus()}let links_btn=qs("#links_btn"),links_window=qs(".links_window"),links_window_items=qs(".links_window_items"),links_window_empty=qs(".links_window_empty"),links_window_panel=qs(".links_window_panel"),links_add_link=qs("#links_add_link"),links_form=qs("#links_form"),links_hide_form=qs("#links_hide_form"),links_input_title=qs("#links_input_title"),links_input_url=qs("#links_input_url"),links_save=qs("#links_save"),links_save_text=qs("#links_save_text");links_window.addEventListener("animationend",(function(n){n.target.classList.contains("links_window")&&"animation__links_window_hide"===n.animationName&&(links_window.style.display="none",links_window.dataset.show="false")})),document.addEventListener("mousedown",(function(n){n.target.matches(".links, .links *")||"true"===links_window.dataset.show&&links__window_hide()})),links_btn.addEventListener("click",(function(){"true"===links_window.dataset.show?links__window_hide():links_append__go((function(){links__empty_manager(),links__window_show()}))})),links_add_link.addEventListener("click",(function(){links_window_panel.style.display="none",links_form.style.display="",links_save.dataset.edit_id="false",links_save_text.textContent="Add",links_input_title.value="",links_input_url.value="",links_input_title.focus()})),links_hide_form.addEventListener("click",(function(){links_form.style.display="none",links_window_panel.style.display=""})),links_input_title.addEventListener("keydown",(function(n){"Enter"===n.key&&links__send_form()})),links_input_url.addEventListener("keydown",(function(n){"Enter"===n.key&&links__send_form()})),links_save.addEventListener("click",(function(){links__send_form()})),links_window_items.addEventListener("click",(function(n){if("links_window_item_edit"===n.target.dataset.uid){n.preventDefault();let i=n.target.parentNode.dataset.id;links_window_panel.style.display="none",links_form.style.display="",links_save.dataset.edit_id=i,links_save_text.textContent="Save",links_append__get_item_data(i,(function(n){let i=n.title,_=n.url;links_input_title.value=i,links_input_url.value=_,links_input_title.focus()}))}})),links_window_items.addEventListener("click",(function(n){if("links_window_item_remove"===n.target.dataset.uid){n.preventDefault();let i=n.target.parentNode.dataset.id;links_append__remove_item(i,(function(){links_append__index_items_manager(),links__empty_manager()})),links_save.dataset.edit_id===i&&(links_form.style.display="none",links_window_panel.style.display="")}})),new Sortable(links_window_items,{animation:150,draggable:".links_window_item",onSort:function(){links_append__index_items_manager()}});