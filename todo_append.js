function todo_append__set_item_data(t,e,o,_){chromels("set","todo_item_"+t+"_value",e,(function(){chromels("set","todo_item_"+t+"_completed",o,(function(){_&&_()}))}))}function todo_append__get_item_data(t,e){chromels("get","todo_item_"+t+"_value",!1,(function(o){chromels("get","todo_item_"+t+"_completed",!1,(function(t){e&&e({value:o,completed:t})}))}))}function todo_append__remove_item_data(t,e){chromels("remove","todo_item_"+t+"_value",!1,(function(){chromels("remove","todo_item_"+t+"_completed",!1,(function(){e&&e()}))}))}function todo_append__create_item(t,e){let o=document.createElement("div");o.classList.add("todo_window_item"),o.dataset.id=t,o.innerHTML="\n    <div></div>\n    <text>loading..</text>\n    ",todo_window_items.appendChild(o),todo_append__update_item(t,(function(){e&&e()}))}function todo_append__update_item(t,e){let o=qs('.todo_window_item[data-id="'+t+'"]');o&&todo_append__get_item_data(t,(function(_){let d=_.value;_.completed?o.classList.add("todo_window_item_completed"):o.classList.remove("todo_window_item_completed");let n=qs('.todo_window_item[data-id="'+t+'"]>text');n&&(n.textContent=d),e&&e()}))}function todo_append__remove_item(t,e){todo_append__remove_item_data(t,(function(){let o=qs('.todo_window_item[data-id="'+t+'"]');o&&(o.parentNode.removeChild(o),e&&e())}))}function todo_append__create_item_data(t,e,o){chromels("get","todo_items_count",!1,(function(_){_||(_=0);let d=_++;chromels("set","todo_items_count",_,(function(){chromels("get","todo_items",!1,(function(_){_||(_=[]),_.push(d),chromels("set","todo_items",_,(function(){todo_append__set_item_data(d,t,e,(function(){o&&o(d)}))}))}))}))}))}function todo_append__create_items_data(t,e){let o=0,_=[];!function d(){if(t.length>0){todo_append__create_item_data(t[o].value,t[o].completed,(function(n){_.push(n),o===t.length-1?e&&e(_):(o++,d())}))}}()}function todo_append__index_items_manager(t){let e=[],o=qsAll(".todo_window_item");for(let t=0;t<o.length;t++)e.push(Number(o[t].dataset.id));chromels("set","todo_items",e,(function(){t&&t()}))}function todo_append__go(t){function e(){chromels("get","todo_items",!1,(function(e){for(let t=0;t<e.length;t++)todo_append__create_item(e[t]);t&&t()}))}todo_window_items.innerHTML="",chromels("get","todo_items_count",!1,(function(t){t?e():todo_append__create_items_data(todo_append__start_items,(function(t){e()}))}))}let todo_append__start_items=[{value:"My first todo!",completed:!1}];